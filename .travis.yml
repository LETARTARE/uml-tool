language: cpp

compiler: gcc

env:
  global:
   - secure: "ZM3iC+ZRBxI0ZD19g1hFVaIlm9bRWQ0KVM3YcVsLVRhY/s5U4r5/hc0DCrgcsByhpTYUJTvew17CVPN4iOh4Az233Yj1FoDD6H9exZN5r5LHhvgX7sRD9eFV999FFTb3JD0GW1aUWYuW7stGMIit+xj6mWLkeItNb1E6XODbGXECdP+ChzFxN9btYg15FgTPDXNVljJF6+A4/Jkk/LD93SjCzh+rARzicUFEEY8K4bUEqg7+zJhJyo1qTmBXWzHYCAFJBsBgrdL6jwPiGS4xXgliUNNXZbBltty2jmVMIB5Y4vObkAAPE/OeYhY4RoUFqDQ8nM5zafg+00PTOIuaz3Y40tLBj3ZVzqJ/mNOMc3kR5PNgwAKtw6iX9AA/zIwYQBJX44oFogV+MXbtBbiqxWOM4oz4TwrvFqpIJqi0+plcMmWqTICCSk8AuecQ6NjSeFnFw7qVi/zFjbiiGM/hiOtvSDjTeJuwaCAPH0jFbBMJxga9YGiwzCw9mxtB9ZuqigG3dIOIZYQFmN5JnbaNp0BvBJ0llfX46yO1R02MFwDECciOYsMSbjqcWhtvOCA0jDxsacB7nEr1xOj2v+oYk2fftcepE1Y5p4ijYvxOwavDqksg4Q/4267WMeBZ5KbSUS2FEeNyAtJQ79KtxATZXbB/tvUdSh9jxdmH5PTDbFE="

before_install:
   - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
   - sudo add-apt-repository "deb http://archive.ubuntu.com/ubuntu trusty universe"
   - sudo add-apt-repository "deb http://archive.ubuntu.com/ubuntu trusty main"
   - sudo apt-get install debian-keyring debian-archive-keyring
   - sudo apt-key update
   - sudo apt-get update -qq
   
install:
   - sudo pip install --upgrade pip
   - sudo pip install cpp-coveralls
   - sudo apt-get install -qq gcc-5 g++-5
   - sudo apt-get install -qq ggcov
   - sudo update-alternatives --install /usr/bin/gcov gcov /usr/bin/gcov-5 90
   - sudo apt-get install qt5-default qt5-qmake qtbase5-dev-tools qtchooser qttools5-dev qtbase5-dev libgles2-mesa-dev libqt5gui5 libqt5serialport5-dev libqt5printsupport5 libqt5widgets5 libgles2-mesa libgl1-mesa-dev libgl1-mesa-glx libglapi-mesa libegl1-mesa-dev libpango-1.0-0
   - sudo apt-get install zlib1g-dev libudev-dev
   - sudo apt-get install libgtest-dev
   - "cd /usr/src/gtest && sudo cmake . && sudo cmake --build . && sudo mv libg* /usr/local/lib/ ; cd -"
   
script:
   # build application
   - qmake -v
   - qmake
   - make -j4
   
   # build and run tests
   - cd tests/test
   - qmake
   - make -j4
   - ./test
   
addons:
  coverity_scan:
    project:
      name: "vt4a2h/uml-tool"
      description: "Build submitted via Travis CI"
    notification_email: vt4a2h@gmail.com
    build_command_prepend: "qmake"
    build_command:   "make -j4"
    branch_pattern: master   
    